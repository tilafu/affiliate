<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
    <div class="container">
        <a class="navbar-brand" href="home.html">
            <img src="../assets/uploads/cdot/logo.png" alt="CDOT Database Logo" style="height: 60px;" class="me-2">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>        <div class="collapse navbar-collapse" id="navbarNav">
            <!-- Mobile menu header with close button -->
            <div class="mobile-menu-header d-lg-none d-flex justify-content-between align-items-center p-3">
                <span class="fw-bold">Menu</span>
                <button type="button" class="btn-close-mobile" aria-label="Close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item">
                    <a class="nav-link" href="home.html">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="about.html">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pea.html">PEA Guide</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="features.html">Features</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="pricing.html">Pricing</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="case-studies.html">Case Studies</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="project.html">Project</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="contact.html">Contact</a>
                </li>
            </ul>
            <a href="login.html" class="btn btn-primary ms-lg-3">Launch WorkDesk <i class="fas fa-arrow-right"></i></a>
        </div>
    </div>
</nav>

<script>
// JavaScript for full-screen mobile menu
const navbarCollapse = document.getElementById('navbarNav');
const navbarToggler = document.querySelector('.navbar-toggler');

function toggleFullscreenMenu() {
    if (navbarCollapse) {
        navbarCollapse.classList.toggle('fullscreen');
    }
}

if (navbarToggler) {
    navbarToggler.addEventListener('click', function() {
        if (navbarCollapse && !navbarCollapse.classList.contains('show')) { 
            navbarCollapse.classList.add('fullscreen');
        } else if (navbarCollapse) { 
            navbarCollapse.classList.remove('fullscreen');
        }
    });
}

// Handle mobile close button
document.addEventListener('DOMContentLoaded', function() {
    const mobileCloseBtn = document.querySelector('.btn-close-mobile');
    if (mobileCloseBtn) {
        mobileCloseBtn.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            if (navbarCollapse) {
                navbarCollapse.classList.remove('fullscreen');
                navbarCollapse.classList.remove('show');
                
                // Also trigger Bootstrap collapse to hide
                const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                    toggle: false
                });
                bsCollapse.hide();
            }
        });
    }
});

window.addEventListener('resize', function() {
    if (window.innerWidth > 991.98 && navbarCollapse && navbarCollapse.classList.contains('fullscreen')) {
        navbarCollapse.classList.remove('fullscreen');
        if (navbarCollapse.classList.contains('show')) {
            const bsCollapse = new bootstrap.Collapse(navbarCollapse, {
                toggle: false
            });
            bsCollapse.hide();
        }
    }
});

// Set active navigation link based on current page
document.addEventListener('DOMContentLoaded', function() {
    const currentPage = window.location.pathname.split('/').pop();
    const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === currentPage) {
            link.classList.add('active');
            link.setAttribute('aria-current', 'page');
        }
    });
});
</script>

<style>
/* Mobile menu styling */
.mobile-menu-header {
    border-bottom: 1px solid rgba(0,0,0,0.1);
    margin-bottom: 1rem;
}

.btn-close-mobile {
    background: none;
    border: none;
    font-size: 1.5rem;
    color: #333;
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.btn-close-mobile:hover {
    background-color: rgba(0,0,0,0.1);
    color: #000;
}

/* Ensure mobile menu header is only visible when menu is open */
@media (min-width: 992px) {
    .mobile-menu-header {
        display: none !important;
    }
}

/* Full-screen mobile menu styles */
@media (max-width: 991.98px) {
    .navbar-collapse.fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: white;
        z-index: 9999;
        padding: 0;
        display: flex !important;
        flex-direction: column;
        overflow-y: auto;
    }
    
    .navbar-collapse.fullscreen .navbar-nav {
        width: 100%;
        padding: 1rem;
    }
    
    .navbar-collapse.fullscreen .nav-link {
        padding: 1rem 1.5rem;
        font-size: 1.1rem;
        border-bottom: 1px solid rgba(0,0,0,0.1);
    }
    
    .navbar-collapse.fullscreen .btn.btn-primary {
        margin: 1rem;
        align-self: flex-start;
    }
}</style>
