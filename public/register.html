<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - CDOT Database</title>
    <link rel="icon" type="image/png" href="assets/uploads/logo.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/public-pages.css">
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
        }

        .signup-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
            max-width: 1200px;
            margin: 0 auto;
        }

        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .back-link {
            position: fixed;
            top: 20px;
            left: 20px;
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-link:hover {
            color: #ffc107;
            text-decoration: none;
        }

        .logo-section {
            text-align: center;
            padding: 30px 40px;
            background: rgba(255, 255, 255, 0.1);
        }

        .logo {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            background-color: #007bff;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo img {
            height: 80%;
        }

        .form-section {
            padding: 40px;
        }

        .form-control {
            border-radius: 15px;
            border: 2px solid #e9ecef;
            padding: 15px 20px;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        }

        .form-label {
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
        }

        .password-field {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            color: #6c757d;
            z-index: 10;
        }

        .password-strength {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 8px;
            font-size: 14px;
            color: #6c757d;
        }

        .strength-indicator {
            font-weight: 600;
        }

        .radio-group {
            margin: 30px 0;
        }

        .radio-option {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }

        .radio-option:hover {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.02);
        }

        .radio-option input[type="radio"] {
            margin-right: 15px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #007bff;
        }

        .radio-option label {
            margin: 0;
            cursor: pointer;
            font-size: 14px;
            flex: 1;
            font-weight: 500;
        }

        .radio-option.selected {
            border-color: #007bff;
            background-color: rgba(0, 123, 255, 0.05);
        }

        .btn-signup {
            background: linear-gradient(45deg, #007bff, #0056b3);
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        .btn-signup:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(0, 123, 255, 0.4);
        }

        .terms-text {
            font-size: 0.875rem;
            color: #6c757d;
            line-height: 1.6;
            text-align: center;
            margin-top: 20px;
        }

        .terms-text a {
            color: #007bff;
            text-decoration: none;
        }

        .terms-text a:hover {
            text-decoration: underline;
        }        .stats-section {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%), 
                        url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            position: relative;
        }
        
        .stats-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.1);
            z-index: 1;
        }
        
        .stats-section > * {
            position: relative;
            z-index: 2;
        }

        .stat-item {
            margin-bottom: 40px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffc107;
        }

        .stat-text {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 5px;
            display: none;
        }

        .error-message.visible {
            display: block;
        }

        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .cookie-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .cookie-option {
            padding: 15px;
            border: 1px solid #e9ecef;
            border-radius: 10px;
            text-align: center;
            background: rgba(248, 249, 250, 0.5);
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
            margin: 10px auto;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #007bff;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-deny {
            background: #f8f9fa;
            color: #495057;
        }

        .btn-deny:hover {
            background: #e9ecef;
        }

        .btn-allow {
            background: linear-gradient(45deg, #007bff, #0056b3);
            color: white;
        }

        .btn-allow:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);
        }

        @media (max-width: 768px) {
            .signup-container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .form-section,            .stats-section {
                padding: 30px 20px;
                background-attachment: scroll;
            }
            
            .language-switcher,
            .back-link {
                position: relative;
                top: auto;
                left: auto;
                right: auto;
                margin-bottom: 20px;
                text-align: center;
            }

            .cookie-options {
                grid-template-columns: 1fr;
            }

            .cookie-buttons {
                flex-direction: column;
            }

            .cookie-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Back to Login Link -->
    <a href="login.html" class="back-link">
        <i class="fas fa-arrow-left"></i> Back to Login
    </a>

    <!-- Language Switcher -->
    <div class="language-switcher">
        <label for="language-switcher-select" class="visually-hidden">Language:</label>
        <select id="language-switcher-select" class="form-select form-select-sm">
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="es">Español</option>
        </select>
    </div>

    <div class="container mt-4">
        <div class="signup-container">
            <!-- Logo Section -->
            <div class="logo-section">
                <div class="logo">
                    <img src="assets/uploads/logo.png" alt="CDOT Database Logo">
                </div>
                <h4 class="mb-0 text-dark fw-bold" data-i18n="signupHeader">Join CDOT Database</h4>
                <p class="text-muted mt-2">Start your career as a Product Engagement Associate</p>
            </div>

            <div class="row g-0">
                <!-- Registration Form Section -->
                <div class="col-lg-7">
                    <div class="form-section">
                        <form id="signupForm">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="username" class="form-label" data-i18n="publicUsernameLabel">
                                        <i class="fas fa-user me-1"></i>Public Username
                                    </label>
                                    <input type="text" class="form-control" id="username" name="username" required>
                                    <div class="error-message" id="usernameError"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label" data-i18n="emailLabel">
                                        <i class="fas fa-envelope me-1"></i>Email Address
                                    </label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                    <div class="error-message" id="emailError"></div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="password" class="form-label" data-i18n="passwordLabel">
                                        <i class="fas fa-lock me-1"></i>Password
                                    </label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="password" name="password" required>
                                        <span class="toggle-password">👁️</span>
                                        <div class="password-strength">
                                            <span data-i18n="passwordStrength">Strength:</span>
                                            <span id="strength-indicator" class="strength-indicator">-</span>
                                        </div>
                                    </div>
                                    <div class="error-message" id="passwordError"></div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="repeat-password" class="form-label" data-i18n="repeatPasswordLabel">
                                        <i class="fas fa-lock me-1"></i>Confirm Password
                                    </label>
                                    <div class="password-field">
                                        <input type="password" class="form-control" id="repeat-password" name="repeat-password" required>
                                        <span class="toggle-password">👁️</span>
                                    </div>
                                    <div class="error-message" id="repeatPasswordError"></div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <label for="referralCode" class="form-label" data-i18n="referralCodeLabel">
                                    <i class="fas fa-gift me-1"></i>Referral Code
                                </label>
                                <input type="text" class="form-control" id="referralCode" name="referralCode" required>
                                <div class="error-message" id="referralCodeError"></div>
                            </div>

                            <div class="radio-group">
                                <label class="form-label" data-i18n="revenueSourceLabel">
                                    <i class="fas fa-chart-line me-1"></i>What is your main source of revenue?
                                </label>
                                <div class="radio-option">
                                    <input type="radio" id="vendor" name="revenue_source" value="vendor">
                                    <label for="vendor" data-i18n="vendorOption">I am a vendor / I primarily sell my own products.</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="affiliate" name="revenue_source" value="affiliate">
                                    <label for="affiliate" data-i18n="affiliateOption">I am an affiliate / I primarily promote other people's products.</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="both" name="revenue_source" value="both">
                                    <label for="both" data-i18n="bothOption">Both equally.</label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-signup btn-primary w-100 mb-3" data-i18n="continueButton">
                                <i class="fas fa-user-plus me-2"></i>Create Account
                            </button>

                            <div class="terms-text" data-i18n="termsText">
                                By clicking "Create Account", you agree to our <a href="#" class="text-decoration-none">Terms and Conditions</a> 
                                and confirm that you have read our <a href="#" class="text-decoration-none">Privacy Policy</a>. 
                                You also agree to receive marketing communications from CDOT Database and understand that you can opt out at any time.
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="col-lg-5">
                    <div class="stats-section h-100">
                        <div class="stat-item">
                            <div class="stat-number">2M+</div>
                            <div class="stat-text" data-i18n="globalActiveUsers">global active users</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">$3B+</div>
                            <div class="stat-text" data-i18n="salesProcessed">in sales processed</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">10K+</div>
                            <div class="stat-text" data-i18n="affiliatesTrust">affiliates trust our platform</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>    <!-- Cookie Banner -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-start mb-3">
                        <h5 class="fw-bold" data-i18n="cookieTitle">This website uses cookies and third-party services</h5>
                        <button type="button" class="btn-close" onclick="closeCookieBanner()" aria-label="Close"></button>
                    </div>
                    
                    <p class="mb-3" data-i18n="cookieText">
                        We use cookies and third-party services (e.g., tracking tools), particularly to personalize content and ads, 
                        offer social media features, and analyze our website traffic. We also share information about your use of our 
                        website with our social media, advertising, and analytics partners.
                    </p>
                    
                    <div class="cookie-options">
                        <div class="cookie-option">
                            <div class="fw-bold mb-2" data-i18n="necessaryCookie">Necessary</div>
                            <label class="toggle-switch">
                                <input type="checkbox" checked disabled>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="cookie-option">
                            <div class="fw-bold mb-2" data-i18n="preferencesCookie">Preferences</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="preferences">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="cookie-option">
                            <div class="fw-bold mb-2" data-i18n="statisticsCookie">Statistics</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="statistics">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="cookie-option">
                            <div class="fw-bold mb-2" data-i18n="marketingCookie">Marketing</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="marketing">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="cookie-buttons">
                        <button class="cookie-btn btn-deny" data-i18n="denyButton" onclick="denyCookies()">Deny</button>
                        <button class="cookie-btn btn-allow" data-i18n="allowSelectionButton" onclick="allowSelectedCookies()">Allow Selection</button>
                        <button class="cookie-btn btn-allow" data-i18n="allowAllButton" onclick="allowAllCookies()">Allow All</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- App Scripts -->
    <script src="js/i18n.js"></script>
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>    <script>
        // Keep DOMContentLoaded for setup, move submission logic
        document.addEventListener('DOMContentLoaded', function() {
            // Language switcher functionality
            const languageSwitcher = document.getElementById('language-switcher-select');
            if (languageSwitcher) {
                languageSwitcher.addEventListener('change', function() {
                    console.log('Language changed to:', this.value);
                });
            }

            // Password visibility toggle
            document.querySelectorAll('.toggle-password').forEach(button => {
                button.addEventListener('click', function() {
                    const input = this.previousElementSibling;
                    if (input && input.type === 'password') {
                        input.type = 'text';
                        this.textContent = '🙈';
                    } else if (input) {
                        input.type = 'password';
                        this.textContent = '👁️';
                    }
                });
            });

            // Password strength checker
            const passwordInput = document.getElementById('password');
            const strengthIndicator = document.getElementById('strength-indicator');
            if (passwordInput && strengthIndicator) {
                passwordInput.addEventListener('input', function() {
                    const password = this.value;
                    let strength = 0;
                    
                    if (password.length >= 8) strength++;
                    if (password.match(/[a-z]/)) strength++;
                    if (password.match(/[A-Z]/)) strength++;
                    if (password.match(/[0-9]/)) strength++;
                    if (password.match(/[^a-zA-Z0-9]/)) strength++;
                    
                    let strengthText = '-';
                    let strengthClass = '';
                    
                    switch (strength) {
                        case 0:
                        case 1:
                            strengthText = 'Very Weak';
                            strengthClass = 'text-danger';
                            break;
                        case 2:
                            strengthText = 'Weak';
                            strengthClass = 'text-warning';
                            break;
                        case 3:
                            strengthText = 'Medium';
                            strengthClass = 'text-info';
                            break;
                        case 4:
                            strengthText = 'Strong';
                            strengthClass = 'text-success';
                            break;
                        case 5:
                            strengthText = 'Very Strong';
                            strengthClass = 'text-success fw-bold';
                            break;
                    }
                    
                    strengthIndicator.textContent = strengthText;
                    strengthIndicator.className = `strength-indicator ${strengthClass}`;
                });
            }

            // Radio button styling
            document.querySelectorAll('.radio-option').forEach(option => {
                const radio = option.querySelector('input[type="radio"]');
                radio.addEventListener('change', function() {
                    // Remove selected class from all options
                    document.querySelectorAll('.radio-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to current option
                    if (this.checked) {
                        option.classList.add('selected');
                    }
                });
            });
            
            // Add event listener to call handleRegisterSubmit from auth.js
            const signupForm = document.getElementById('signupForm');
            if (signupForm) {
                signupForm.addEventListener('submit', handleRegisterSubmit); 
            } else {
                console.error('Signup form not found');
            }
        });

        // Cookie banner functions
        function closeCookieBanner() {
            document.getElementById('cookieBanner').style.display = 'none';
        }

        function denyCookies() {
            // Set all optional cookies to false
            document.getElementById('preferences').checked = false;
            document.getElementById('statistics').checked = false;
            document.getElementById('marketing').checked = false;
            closeCookieBanner();
        }

        function allowSelectedCookies() {
            // Process selected cookies
            const preferences = document.getElementById('preferences').checked;
            const statistics = document.getElementById('statistics').checked;
            const marketing = document.getElementById('marketing').checked;
            
            console.log('Cookie preferences:', { preferences, statistics, marketing });
            closeCookieBanner();
        }

        function allowAllCookies() {
            // Set all cookies to true
            document.getElementById('preferences').checked = true;
            document.getElementById('statistics').checked = true;
            document.getElementById('marketing').checked = true;
            allowSelectedCookies();
        }

        // Note: The validation functions and form submission logic are now handled by handleRegisterSubmit in public/js/auth.js
    </script>
</body>
</html>
